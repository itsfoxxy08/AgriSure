<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Transaction - AgriSure</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="nav-brand">
            <img src="logo.jpg" alt="AgriSure Logo" class="logo-img">
            <span data-en="AgriSure" data-hi="‡§è‡§ó‡•ç‡§∞‡•Ä‡§∂‡•ç‡§Ø‡•ã‡§∞">AgriSure</span>
        </a>
        
        <div class="nav-menu">
            <a href="index.html" class="nav-link"><span data-en="Home" data-hi="‡§π‡•ã‡§Æ">Home</span></a>
            <a href="schemes.html" class="nav-link"><span data-en="Gov-Schemes" data-hi="‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç">Gov-Schemes</span></a>
            <a href="payment.html" class="nav-link"><span data-en="Payments" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§®">Payments</span></a>
            <a href="track.html" class="nav-link"><span data-en="Track Payments" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç">Track Payments</span></a>
            <a href="complaint.html" class="nav-link"><span data-en="Complaints" data-hi="‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç">Complaints</span></a>
            <a href="register.html" class="nav-link" id="registerLink"><span data-en="Register" data-hi="‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£">Register</span></a>
            <a href="profile.html" class="nav-link" id="profileLink" style="display:none;"><span data-en="Profile" data-hi="‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤">Profile</span></a>
        </div>
        
        <div class="nav-controls">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <span class="theme-icon">üåô</span>
            </button>
            <button class="lang-toggle" onclick="toggleLanguage()" aria-label="Toggle language">
                <span class="lang-text">‡§π‡§ø‡§Ç</span>
            </button>
            <div class="user-profile" id="userProfile" style="display:none;">
                <button class="profile-btn" onclick="toggleProfileMenu()" aria-label="User profile">
                    <span class="profile-icon">üë§</span>
                </button>
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="profile-info">
                        <span class="user-name" id="userName"></span>
                        <span class="user-phone" id="userPhone"></span>
                    </div>
                    <div class="profile-actions">
                        <button onclick="viewProfile()" data-en="My Profile" data-hi="‡§Æ‡•á‡§∞‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤">üë§ My Profile</button>
                        <button onclick="signOut()" data-en="Sign Out" data-hi="‡§∏‡§æ‡§á‡§® ‡§Ü‡§â‡§ü">üö™ Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="track-container">
            <div class="page-header">
                <h2 data-en="Transaction Tracker" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞">Transaction Tracker</h2>
                <p data-en="Track your payment status and transaction history" data-hi="‡§Ö‡§™‡§®‡•á ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§î‡§∞ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§ï‡•ã ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç">Track your payment status and transaction history</p>
            </div>
            
            <form id="trackForm" class="track-form">
                <div class="form-group">
                    <label for="transactionId" data-en="Transaction ID *" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ü‡§à‡§°‡•Ä *">üîç Transaction ID *</label>
                    <input type="text" id="transactionId" name="transactionId" data-en="Enter your transaction ID (e.g., TXN1725372672441)" data-hi="‡§Ö‡§™‡§®‡§æ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§ú‡•à‡§∏‡•á, TXN1725372672441)" placeholder="Enter your transaction ID (e.g., TXN1725372672441)" required>
                    <span class="form-line"></span>
                </div>
                <button type="submit" class="btn-primary" data-en="Track Transaction" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç">üîç Track Transaction</button>
            </form>

            <div id="transactionResult" class="transaction-result" style="display:none;">
                <div class="result-card">
                    <h3 data-en="Transaction Details" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§µ‡§ø‡§µ‡§∞‡§£">Transaction Details</h3>
                    <div class="detail-row">
                        <span class="label" data-en="Transaction ID:" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ü‡§à‡§°‡•Ä:">Transaction ID:</span>
                        <span class="value" id="resultTxnId"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Status:" data-hi="‡§∏‡•ç‡§•‡§ø‡§§‡§ø:">Status:</span>
                        <span class="value status" id="resultStatus"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Amount:" data-hi="‡§∞‡§æ‡§∂‡§ø:">Amount:</span>
                        <span class="value" id="resultAmount"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Vendor:" data-hi="‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ:">Vendor:</span>
                        <span class="value" id="resultVendor"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Date & Time:" data-hi="‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï ‡§î‡§∞ ‡§∏‡§Æ‡§Ø:">Date & Time:</span>
                        <span class="value" id="resultDateTime"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Payment Method:" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§µ‡§ø‡§ß‡§ø:">Payment Method:</span>
                        <span class="value" id="resultPaymentMethod"></span>
                    </div>
                    <div class="detail-row">
                        <span class="label" data-en="Description:" data-hi="‡§µ‡§ø‡§µ‡§∞‡§£:">Description:</span>
                        <span class="value" id="resultDescription"></span>
                    </div>
                </div>

                <div class="timeline">
                    <h4 data-en="Transaction Timeline" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§∏‡§Æ‡§Ø‡§∞‡•á‡§ñ‡§æ">Transaction Timeline</h4>
                    <div class="timeline-item completed">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <h5 data-en="Payment Initiated" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ">Payment Initiated</h5>
                            <p data-en="Transaction request received" data-hi="‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§Ü">Transaction request received</p>
                        </div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <h5 data-en="Payment Processing" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§™‡•ç‡§∞‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£">Payment Processing</h5>
                            <p data-en="Verifying payment details" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç">Verifying payment details</p>
                        </div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-marker"></div>
                        <div class="timeline-content">
                            <h5 data-en="Payment Successful" data-hi="‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∏‡§´‡§≤">Payment Successful</h5>
                            <p data-en="Amount transferred to vendor" data-hi="‡§∞‡§æ‡§∂‡§ø ‡§µ‡§ø‡§ï‡•ç‡§∞‡•á‡§§‡§æ ‡§ï‡•ã ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§ø‡§§">Amount transferred to vendor</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="recent-transactions">
                <h3 data-en="Recent Transactions" data-hi="‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§®">Recent Transactions</h3>
                <div class="transaction-list">
                    <div class="transaction-item">
                        <div class="txn-info">
                            <span class="txn-id">TXN1725372672441</span>
                            <span class="txn-desc" data-en="Seeds purchase from Seeds & Co." data-hi="‡§∏‡•Ä‡§°‡•ç‡§∏ ‡§è‡§Ç‡§° ‡§ï‡§Ç‡§™‡§®‡•Ä ‡§∏‡•á ‡§¨‡•Ä‡§ú ‡§ñ‡§∞‡•Ä‡§¶">Seeds purchase from Seeds & Co.</span>
                        </div>
                        <div class="txn-details">
                            <span class="txn-amount">‚Çπ2,500</span>
                            <span class="txn-status success" data-en="Completed" data-hi="‡§™‡•Ç‡§∞‡•ç‡§£">Completed</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div class="txn-info">
                            <span class="txn-id">TXN1725372672440</span>
                            <span class="txn-desc" data-en="Fertilizer from Fertilizer Hub" data-hi="‡§´‡§∞‡•ç‡§ü‡§ø‡§≤‡§æ‡§á‡§ú‡§∞ ‡§π‡§¨ ‡§∏‡•á ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï">Fertilizer from Fertilizer Hub</span>
                        </div>
                        <div class="txn-details">
                            <span class="txn-amount">‚Çπ1,800</span>
                            <span class="txn-status success" data-en="Completed" data-hi="‡§™‡•Ç‡§∞‡•ç‡§£">Completed</span>
                        </div>
                    </div>
                    <div class="transaction-item">
                        <div class="txn-info">
                            <span class="txn-id">TXN1725372672439</span>
                            <span class="txn-desc" data-en="Tools from Agri Tools Ltd" data-hi="‡§è‡§ó‡•ç‡§∞‡•Ä ‡§ü‡•Ç‡§≤‡•ç‡§∏ ‡§≤‡§ø‡§Æ‡§ø‡§ü‡•á‡§° ‡§∏‡•á ‡§â‡§™‡§ï‡§∞‡§£">Tools from Agri Tools Ltd</span>
                        </div>
                        <div class="txn-details">
                            <span class="txn-amount">‚Çπ3,200</span>
                            <span class="txn-status pending" data-en="Processing" data-hi="‡§™‡•ç‡§∞‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£">Processing</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <button class="chatbot-toggle" onclick="toggleChatbot()" aria-label="Open chatbot">
            ü§ñ
        </button>
        <div class="chatbot-container" id="chatbotContainer">
            <div class="chatbot-header">
                <span>üåæ</span>
                <span data-en="Track Assistant" data-hi="‡§ü‡•ç‡§∞‡•à‡§ï ‡§∏‡§π‡§æ‡§Ø‡§ï">Track Assistant</span>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot" data-en="Hi! I can help you track transactions and understand payment status!" data-hi="‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§î‡§∞ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç!">
                    Hi! I can help you track transactions and understand payment status!
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatbotInput" placeholder="Ask about tracking..." data-en="Ask about tracking..." data-hi="‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á‡§Ç...">
                <button onclick="sendMessage()" data-en="Send" data-hi="‡§≠‡•á‡§ú‡•á‡§Ç">Send</button>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'en';
        let currentTheme = 'light';

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme);
            document.querySelector('.theme-icon').textContent = currentTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
            localStorage.setItem('theme', currentTheme);
        }

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            document.querySelectorAll('[data-en][data-hi]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLang}`);
            });
            document.querySelector('.lang-text').textContent = currentLang === 'en' ? '‡§π‡§ø‡§Ç' : 'EN';
            localStorage.setItem('language', currentLang);
        }

        function toggleMenu() {
            document.querySelector('.nav-links').classList.toggle('active');
            document.querySelector('.hamburger').classList.toggle('active');
        }

        function toggleProfileMenu() {
            document.getElementById('profileDropdown').classList.toggle('active');
        }

        function viewProfile() {
            window.location.href = 'profile.html';
        }

        function signOut() {
            const message = currentLang === 'en' 
                ? 'Are you sure you want to sign out?'
                : '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§∏‡§æ‡§á‡§® ‡§Ü‡§â‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?';
            if (confirm(message)) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userData');
                window.location.href = 'index.html';
            }
        }

        function checkUserLogin() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            if (isLoggedIn && userData.name) {
                document.getElementById('userProfile').style.display = 'block';
                document.getElementById('userName').textContent = userData.name;
                document.getElementById('userPhone').textContent = userData.phone;
            }
        }

        function toggleChatbot() {
            const container = document.getElementById('chatbotContainer');
            container.style.display = container.style.display === 'flex' ? 'none' : 'flex';
        }

        function sendMessage() {
            const input = document.getElementById('chatbotInput');
            const messages = document.getElementById('chatbotMessages');
            const message = input.value.trim();
            
            if (!message) return;
            
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.textContent = message;
            messages.appendChild(userMsg);
            
            input.value = '';
            
            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'message bot';
                botMsg.textContent = getBotResponse(message);
                messages.appendChild(botMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
            
            messages.scrollTop = messages.scrollHeight;
        }

        function getBotResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('track') || msg.includes('transaction') || msg.includes('id')) {
                return currentLang === 'en' 
                    ? 'Enter your transaction ID in the form above. You can find it in your payment confirmation or recent transactions.'
                    : '‡§ä‡§™‡§∞ ‡§ï‡•á ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡§æ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Ü‡§à‡§°‡•Ä ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§Ø‡§æ ‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§Æ‡•á‡§Ç ‡§™‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§';
            }
            
            if (msg.includes('status') || msg.includes('payment')) {
                return currentLang === 'en' 
                    ? 'Transaction status shows: Success (completed), Pending (processing), or Failed (unsuccessful). Check recent transactions below.'
                    : '‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§¶‡§ø‡§ñ‡§æ‡§§‡•Ä ‡§π‡•à: ‡§∏‡§´‡§≤ (‡§™‡•Ç‡§∞‡•ç‡§£), ‡§≤‡§Ç‡§¨‡§ø‡§§ (‡§™‡•ç‡§∞‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£), ‡§Ø‡§æ ‡§Ö‡§∏‡§´‡§≤ (‡§Ö‡§∏‡§´‡§≤)‡•§ ‡§®‡•Ä‡§ö‡•á ‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç‡•§';
            }
            
            if (msg.includes('recent') || msg.includes('history')) {
                return currentLang === 'en' 
                    ? 'Recent transactions are automatically saved and displayed below. Click on any transaction to see details.'
                    : '‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡§π‡•á‡§ú‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§®‡•Ä‡§ö‡•á ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§';
            }
            
            return currentLang === 'en' 
                ? 'I can help with transaction tracking, payment status, and transaction history. What do you need help with?'
                : '‡§Æ‡•à‡§Ç ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§ü‡•ç‡§∞‡•à‡§ï‡§ø‡§Ç‡§ó, ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§î‡§∞ ‡§≤‡•á‡§®‡§¶‡•á‡§® ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§™‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§ö‡•Ä‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ö‡§æ‡§π‡§ø‡§è?';
        }

        // Load recent transactions
        function loadRecentTransactions() {
            const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            const transactionList = document.querySelector('.transaction-list');
            
            if (transactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; color: var(--on-surface-variant);">No recent transactions found</p>';
                return;
            }
            
            transactionList.innerHTML = transactions.map(txn => `
                <div class="transaction-item">
                    <div class="txn-info">
                        <div class="txn-id">${txn.id}</div>
                        <div class="txn-desc">${txn.description}</div>
                    </div>
                    <div class="txn-details">
                        <div class="txn-amount">‚Çπ${txn.amount}</div>
                        <div class="txn-status ${txn.status}">${txn.status.toUpperCase()}</div>
                    </div>
                </div>
            `).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const savedLang = localStorage.getItem('language') || 'en';
            
            if (savedTheme === 'dark') {
                currentTheme = 'dark';
                document.body.setAttribute('data-theme', 'dark');
                document.querySelector('.theme-icon').textContent = '‚òÄÔ∏è';
            }
            
            if (savedLang === 'hi') {
                currentLang = 'hi';
                document.querySelectorAll('[data-en][data-hi]').forEach(el => {
                    el.textContent = el.getAttribute('data-hi');
                });
                document.querySelector('.lang-text').textContent = 'EN';
            }
            
            checkUserLogin();
            loadRecentTransactions();
            
            document.getElementById('chatbotInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });

        document.getElementById('trackForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const txnId = document.getElementById('transactionId').value;
            const transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            const transaction = transactions.find(txn => txn.id === txnId);
            
            if (transaction) {
                const vendorNames = {
                    'seeds-co': 'Seeds & Co.',
                    'fertilizer-hub': 'Fertilizer Hub',
                    'agri-tools': 'Agri Tools Ltd',
                    'organic-farm': 'Organic Farm Supply'
                };
                
                document.getElementById('resultTxnId').textContent = transaction.id;
                document.getElementById('resultStatus').textContent = transaction.status.toUpperCase();
                document.getElementById('resultStatus').className = 'value status success';
                document.getElementById('resultAmount').textContent = '‚Çπ' + transaction.amount;
                document.getElementById('resultVendor').textContent = vendorNames[transaction.vendor] || 'Unknown';
                document.getElementById('resultDateTime').textContent = new Date(transaction.date).toLocaleString();
                document.getElementById('resultPaymentMethod').textContent = transaction.paymentMethod.toUpperCase();
                document.getElementById('resultDescription').textContent = transaction.description;
            } else {
                document.getElementById('resultTxnId').textContent = txnId;
                document.getElementById('resultStatus').textContent = 'NOT FOUND';
                document.getElementById('resultStatus').className = 'value status error';
                document.getElementById('resultAmount').textContent = '-';
                document.getElementById('resultVendor').textContent = '-';
                document.getElementById('resultDateTime').textContent = '-';
                document.getElementById('resultPaymentMethod').textContent = '-';
                document.getElementById('resultDescription').textContent = 'Transaction not found';
            }
            
            document.getElementById('transactionResult').style.display = 'block';
        });
    </script>
</body>
</html>
