<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Payments - AgriSure</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="nav-brand">
            <img src="logo.jpg" alt="AgriSure Logo" class="logo-img">
            <span data-en="AgriSure" data-hi="рдПрдЧреНрд░реАрд╢реНрдпреЛрд░">AgriSure</span>
        </a>
        
        <div class="nav-menu">
            <a href="index.html" class="nav-link"><span data-en="Home" data-hi="рд╣реЛрдо">Home</span></a>
            <a href="schemes.html" class="nav-link"><span data-en="Gov-Schemes" data-hi="рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛рдПрдВ">Gov-Schemes</span></a>
            <a href="payment.html" class="nav-link"><span data-en="Payments" data-hi="рднреБрдЧрддрд╛рди">Payments</span></a>
            <a href="track.html" class="nav-link"><span data-en="Track Payments" data-hi="рднреБрдЧрддрд╛рди рдЯреНрд░реИрдХ рдХрд░реЗрдВ">Track Payments</span></a>
            <a href="complaint.html" class="nav-link"><span data-en="Complaints" data-hi="рд╢рд┐рдХрд╛рдпрддреЗрдВ">Complaints</span></a>
            <a href="register.html" class="nav-link" id="registerLink"><span data-en="Register" data-hi="рдкрдВрдЬреАрдХрд░рдг">Register</span></a>
            <a href="profile.html" class="nav-link" id="profileLink" style="display:none;"><span data-en="Profile" data-hi="рдкреНрд░реЛрдлрд╛рдЗрд▓">Profile</span></a>
        </div>
        
        <div class="nav-controls">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <span class="theme-icon">ЁЯМЩ</span>
            </button>
            <button class="lang-toggle" onclick="toggleLanguage()" aria-label="Toggle language">
                <span class="lang-text">рд╣рд┐рдВ</span>
            </button>
            <div class="user-profile" id="userProfile" style="display:none;">
                <button class="profile-btn" onclick="toggleProfileMenu()" aria-label="User profile">
                    <span class="profile-icon">ЁЯСд</span>
                </button>
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="profile-info">
                        <span class="user-name" id="userName"></span>
                        <span class="user-phone" id="userPhone"></span>
                    </div>
                    <div class="profile-actions">
                        <button onclick="viewProfile()" data-en="My Profile" data-hi="рдореЗрд░реА рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓">ЁЯСд My Profile</button>
                        <button onclick="signOut()" data-en="Sign Out" data-hi="рд╕рд╛рдЗрди рдЖрдЙрдЯ">ЁЯЪк Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="payment-container">
            <div class="page-header">
                <h2 data-en="Secure Payment Gateway" data-hi="рд╕реБрд░рдХреНрд╖рд┐рдд рднреБрдЧрддрд╛рди рдЧреЗрдЯрд╡реЗ">Secure Payment Gateway</h2>
                <p data-en="Make secure transactions with verified vendors" data-hi="рд╕рддреНрдпрд╛рдкрд┐рдд рд╡рд┐рдХреНрд░реЗрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╕реБрд░рдХреНрд╖рд┐рдд рд▓реЗрдирджреЗрди рдХрд░реЗрдВ">Make secure transactions with verified vendors</p>
            </div>
            
            <div class="vendor-selection">
                <h3 data-en="Select Vendor" data-hi="рд╡рд┐рдХреНрд░реЗрддрд╛ рдЪреБрдиреЗрдВ">Select Vendor</h3>
                <select id="vendorSelect" class="form-select">
                    <option value="" data-en="Choose a vendor..." data-hi="рдПрдХ рд╡рд┐рдХреНрд░реЗрддрд╛ рдЪреБрдиреЗрдВ...">Choose a vendor...</option>
                    <option value="seeds-co" data-en="Seeds & Co. - Verified тЬУ" data-hi="рд╕реАрдбреНрд╕ рдПрдВрдб рдХрдВрдкрдиреА - рд╕рддреНрдпрд╛рдкрд┐рдд тЬУ">Seeds & Co. - Verified тЬУ</option>
                    <option value="fertilizer-hub" data-en="Fertilizer Hub - Verified тЬУ" data-hi="рдлрд░реНрдЯрд┐рд▓рд╛рдЗрдЬрд░ рд╣рдм - рд╕рддреНрдпрд╛рдкрд┐рдд тЬУ">Fertilizer Hub - Verified тЬУ</option>
                    <option value="agri-tools" data-en="Agri Tools Ltd - Verified тЬУ" data-hi="рдПрдЧреНрд░реА рдЯреВрд▓реНрд╕ рд▓рд┐рдорд┐рдЯреЗрдб - рд╕рддреНрдпрд╛рдкрд┐рдд тЬУ">Agri Tools Ltd - Verified тЬУ</option>
                    <option value="organic-farm" data-en="Organic Farm Supply - Verified тЬУ" data-hi="рдСрд░реНрдЧреЗрдирд┐рдХ рдлрд╛рд░реНрдо рд╕рдкреНрд▓рд╛рдИ - рд╕рддреНрдпрд╛рдкрд┐рдд тЬУ">Organic Farm Supply - Verified тЬУ</option>
                </select>
            </div>

            <form id="paymentForm" class="payment-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="amount" data-en="Amount (тВ╣) *" data-hi="рд░рд╛рд╢рд┐ (тВ╣) *">ЁЯТ░ Amount (тВ╣) *</label>
                        <input type="number" id="amount" name="amount" min="1" step="0.01" placeholder="Enter amount to pay" required>
                        <span class="form-line"></span>
                    </div>

                    <div class="form-group">
                        <label for="paymentMethod" data-en="Payment Method *" data-hi="рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ *">ЁЯТ│ Payment Method *</label>
                        <select id="paymentMethod" name="paymentMethod" required>
                            <option value="" data-en="Select payment method" data-hi="рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐ рдЪреБрдиреЗрдВ">Select payment method</option>
                            <option value="upi">ЁЯУ▒ UPI</option>
                            <option value="netbanking" data-en="ЁЯПж Net Banking" data-hi="ЁЯПж рдиреЗрдЯ рдмреИрдВрдХрд┐рдВрдЧ">ЁЯПж Net Banking</option>
                            <option value="card" data-en="ЁЯТ│ Debit/Credit Card" data-hi="ЁЯТ│ рдбреЗрдмрд┐рдЯ/рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб">ЁЯТ│ Debit/Credit Card</option>
                            <option value="wallet" data-en="ЁЯУ▒ Digital Wallet" data-hi="ЁЯУ▒ рдбрд┐рдЬрд┐рдЯрд▓ рд╡реЙрд▓реЗрдЯ">ЁЯУ▒ Digital Wallet</option>
                        </select>
                        <span class="form-line"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="description" data-en="Transaction Description *" data-hi="рд▓реЗрдирджреЗрди рд╡рд┐рд╡рд░рдг *">ЁЯУЭ Transaction Description *</label>
                    <input type="text" id="description" name="description" data-en="e.g., Seeds purchase, Fertilizer payment" data-hi="рдЬреИрд╕реЗ, рдмреАрдЬ рдЦрд░реАрдж, рдЙрд░реНрд╡рд░рдХ рднреБрдЧрддрд╛рди" placeholder="e.g., Seeds purchase, Fertilizer payment" required>
                    <span class="form-line"></span>
                </div>

                <div id="upiDetails" class="payment-details" style="display:none;">
                    <div class="form-group">
                        <label for="upiId">ЁЯУ▒ UPI ID *</label>
                        <input type="text" id="upiId" name="upiId" placeholder="yourname@paytm">
                        <span class="form-line"></span>
                    </div>
                </div>

                <div id="cardDetails" class="payment-details" style="display:none;">
                    <div class="form-group">
                        <label for="cardNumber" data-en="Card Number *" data-hi="рдХрд╛рд░реНрдб рдирдВрдмрд░ *">ЁЯТ│ Card Number *</label>
                        <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                        <span class="form-line"></span>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiryDate" data-en="Expiry Date *" data-hi="рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ *">ЁЯУЕ Expiry Date *</label>
                            <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" maxlength="5">
                            <span class="form-line"></span>
                        </div>
                        <div class="form-group">
                            <label for="cvv">ЁЯФТ CVV *</label>
                            <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="3">
                            <span class="form-line"></span>
                        </div>
                    </div>
                </div>

                <div class="security-info">
                    <p>ЁЯФТ <span data-en="Your transaction is secured with 256-bit SSL encryption" data-hi="рдЖрдкрдХрд╛ рд▓реЗрдирджреЗрди 256-рдмрд┐рдЯ SSL рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ">Your transaction is secured with 256-bit SSL encryption</span></p>
                    <p>ЁЯУ▒ <span data-en="You will receive SMS and email confirmation" data-hi="рдЖрдкрдХреЛ SMS рдФрд░ рдИрдореЗрд▓ рдкреБрд╖реНрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧреА">You will receive SMS and email confirmation</span></p>
                </div>

                <button type="submit" class="btn-primary" data-en="Pay Securely" data-hi="рд╕реБрд░рдХреНрд╖рд┐рдд рднреБрдЧрддрд╛рди рдХрд░реЗрдВ">ЁЯФР Pay Securely</button>
            </form>
        </div>
    </main>

    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <button class="chatbot-toggle" onclick="toggleChatbot()" aria-label="Open chatbot">
            ЁЯдЦ
        </button>
        <div class="chatbot-container" id="chatbotContainer">
            <div class="chatbot-header">
                <span>ЁЯМ╛</span>
                <span data-en="Payment Assistant" data-hi="рднреБрдЧрддрд╛рди рд╕рд╣рд╛рдпрдХ">Payment Assistant</span>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot" data-en="Hi! I can help with payment queries, security info, and transaction support!" data-hi="рдирдорд╕реНрддреЗ! рдореИрдВ рднреБрдЧрддрд╛рди рдкреНрд░рд╢реНрдиреЛрдВ, рд╕реБрд░рдХреНрд╖рд╛ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рд▓реЗрдирджреЗрди рд╕рд╣рд╛рдпрддрд╛ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ!">
                    Hi! I can help with payment queries, security info, and transaction support!
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatbotInput" placeholder="Ask about payments..." data-en="Ask about payments..." data-hi="рднреБрдЧрддрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫреЗрдВ...">
                <button onclick="sendMessage()" data-en="Send" data-hi="рднреЗрдЬреЗрдВ">Send</button>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'en';
        let currentTheme = 'light';

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.body.setAttribute('data-theme', currentTheme);
            document.querySelector('.theme-icon').textContent = currentTheme === 'light' ? 'ЁЯМЩ' : 'тШАя╕П';
            localStorage.setItem('theme', currentTheme);
        }

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'hi' : 'en';
            document.querySelectorAll('[data-en][data-hi]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLang}`);
            });
            document.querySelector('.lang-text').textContent = currentLang === 'en' ? 'рд╣рд┐рдВ' : 'EN';
            localStorage.setItem('language', currentLang);
        }

        // Check registration status and toggle register/profile buttons
        function checkRegistrationStatus() {
            const isRegistered = localStorage.getItem('userRegistered') === 'true';
            const registerLink = document.getElementById('registerLink');
            const profileLink = document.getElementById('profileLink');
            
            if (isRegistered) {
                registerLink.style.display = 'none';
                profileLink.style.display = 'block';
            } else {
                registerLink.style.display = 'block';
                profileLink.style.display = 'none';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', checkRegistrationStatus);

        function toggleMenu() {
            document.querySelector('.nav-links').classList.toggle('active');
            document.querySelector('.hamburger').classList.toggle('active');
        }

        function toggleProfileMenu() {
            document.getElementById('profileDropdown').classList.toggle('active');
        }

        function viewProfile() {
            window.location.href = 'profile.html';
        }

        function signOut() {
            const message = currentLang === 'en' 
                ? 'Are you sure you want to sign out?'
                : 'рдХреНрдпрд╛ рдЖрдк рд╡рд╛рдХрдИ рд╕рд╛рдЗрди рдЖрдЙрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?';
            if (confirm(message)) {
                localStorage.removeItem('isLoggedIn');
                localStorage.removeItem('userData');
                window.location.href = 'index.html';
            }
        }

        function checkUserLogin() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            if (isLoggedIn && userData.name) {
                document.getElementById('userProfile').style.display = 'block';
                document.getElementById('userName').textContent = userData.name;
                document.getElementById('userPhone').textContent = userData.phone;
            }
        }

        function toggleChatbot() {
            const container = document.getElementById('chatbotContainer');
            container.style.display = container.style.display === 'flex' ? 'none' : 'flex';
        }

        function sendMessage() {
            const input = document.getElementById('chatbotInput');
            const messages = document.getElementById('chatbotMessages');
            const message = input.value.trim();
            
            if (!message) return;
            
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.textContent = message;
            messages.appendChild(userMsg);
            
            input.value = '';
            
            setTimeout(() => {
                const botMsg = document.createElement('div');
                botMsg.className = 'message bot';
                botMsg.textContent = getBotResponse(message);
                messages.appendChild(botMsg);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
            
            messages.scrollTop = messages.scrollHeight;
        }

        function getBotResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('secure') || msg.includes('safe') || msg.includes('security')) {
                return currentLang === 'en' 
                    ? 'All payments are secured with 256-bit SSL encryption. We only work with verified vendors for your safety.'
                    : 'рд╕рднреА рднреБрдЧрддрд╛рди 256-рдмрд┐рдЯ SSL рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИрдВред рд╣рдо рдЖрдкрдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рд╕рддреНрдпрд╛рдкрд┐рдд рд╡рд┐рдХреНрд░реЗрддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред';
            }
            
            if (msg.includes('upi') || msg.includes('payment method')) {
                return currentLang === 'en' 
                    ? 'We support UPI, Net Banking, Debit/Credit Cards, and Digital Wallets. Choose your preferred method.'
                    : 'рд╣рдо UPI, рдиреЗрдЯ рдмреИрдВрдХрд┐рдВрдЧ, рдбреЗрдмрд┐рдЯ/рдХреНрд░реЗрдбрд┐рдЯ рдХрд╛рд░реНрдб рдФрд░ рдбрд┐рдЬрд┐рдЯрд▓ рд╡реЙрд▓реЗрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВред рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рд╡рд┐рдзрд┐ рдЪреБрдиреЗрдВред';
            }
            
            if (msg.includes('vendor') || msg.includes('seller')) {
                return currentLang === 'en' 
                    ? 'All vendors are verified and trusted. Select from Seeds & Co., Fertilizer Hub, Agri Tools Ltd, or Organic Farm Supply.'
                    : 'рд╕рднреА рд╡рд┐рдХреНрд░реЗрддрд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдФрд░ рднрд░реЛрд╕реЗрдордВрдж рд╣реИрдВред рд╕реАрдбреНрд╕ рдПрдВрдб рдХрдВрдкрдиреА, рдлрд░реНрдЯрд┐рд▓рд╛рдЗрдЬрд░ рд╣рдм, рдПрдЧреНрд░реА рдЯреВрд▓реНрд╕ рд▓рд┐рдорд┐рдЯреЗрдб, рдпрд╛ рдСрд░реНрдЧреЗрдирд┐рдХ рдлрд╛рд░реНрдо рд╕рдкреНрд▓рд╛рдИ рдореЗрдВ рд╕реЗ рдЪреБрдиреЗрдВред';
            }
            
            if (msg.includes('transaction') || msg.includes('track')) {
                return currentLang === 'en' 
                    ? 'After payment, you\'ll get a transaction ID. Use it in the Track Transaction page to monitor your payment status.'
                    : 'рднреБрдЧрддрд╛рди рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ рдПрдХ рд▓реЗрдирджреЗрди рдЖрдИрдбреА рдорд┐рд▓реЗрдЧреАред рдЕрдкрдиреЗ рднреБрдЧрддрд╛рди рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдЯреНрд░реИрдХ рдЯреНрд░рд╛рдВрдЬреИрдХреНрд╢рди рдкреЗрдЬ рдореЗрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред';
            }
            
            return currentLang === 'en' 
                ? 'I can help with payment security, methods, vendor info, and transaction tracking. What would you like to know?'
                : 'рдореИрдВ рднреБрдЧрддрд╛рди рд╕реБрд░рдХреНрд╖рд╛, рд╡рд┐рдзрд┐рдпреЛрдВ, рд╡рд┐рдХреНрд░реЗрддрд╛ рдЬрд╛рдирдХрд╛рд░реА рдФрд░ рд▓реЗрдирджреЗрди рдЯреНрд░реИрдХрд┐рдВрдЧ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред рдЖрдк рдХреНрдпрд╛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣реЗрдВрдЧреЗ?';
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const savedLang = localStorage.getItem('language') || 'en';
            
            if (savedTheme === 'dark') toggleTheme();
            if (savedLang === 'hi') toggleLanguage();
            
            checkUserLogin();
            
            document.getElementById('chatbotInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        });

        document.getElementById('paymentMethod').addEventListener('change', function() {
            const method = this.value;
            document.querySelectorAll('.payment-details').forEach(el => el.style.display = 'none');
            
            if (method === 'upi') {
                document.getElementById('upiDetails').style.display = 'block';
            } else if (method === 'card') {
                document.getElementById('cardDetails').style.display = 'block';
            }
        });

        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const transactionId = 'TXN' + Date.now();
            const formData = new FormData(this);
            
            // Create transaction object
            const transaction = {
                id: transactionId,
                amount: formData.get('amount'),
                description: formData.get('description'),
                vendor: document.getElementById('vendorSelect').value,
                paymentMethod: formData.get('paymentMethod'),
                status: 'success',
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            // Save to localStorage
            let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
            transactions.unshift(transaction);
            transactions = transactions.slice(0, 10); // Keep only last 10
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            const message = currentLang === 'en' 
                ? `Payment initiated successfully!\nTransaction ID: ${transactionId}\nYou can track this transaction using the Transaction Tracker.`
                : `рднреБрдЧрддрд╛рди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЧрдпрд╛!\nрд▓реЗрдирджреЗрди рдЖрдИрдбреА: ${transactionId}\nрдЖрдк рдЯреНрд░рд╛рдВрдЬреИрдХреНрд╢рди рдЯреНрд░реИрдХрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕ рд▓реЗрдирджреЗрди рдХреЛ рдЯреНрд░реИрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред`;
            alert(message);
        });

        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = formattedValue;
        });
    </script>
</body>
</html>
